# Crypto-final
BUAA Cryptography Lab final assignment——SM2加速

configparser是一个用于解析配置文件config.txt的类，运行的所有配置都在config.txt里面修改，椭圆曲线的点用空格分开xy坐标。

SM2.py内包含了一个SM2的类，也包含了SM2的公钥加密解密的方法，init时需要传入a,b,p,G这四个参数；其中的sub_Jacobian，add_Jacobian，pre_process，mul_optimizer四个方法是用于优化的，在使用时将add，sub，mul方法替换为相对应的优化方法即可。

SM2_compare.py是用于对比优化前后效果的展示，会对基点G进行预处理后进行N次倍点运算以及直接对私钥pb进行N次倍点运算，比较优化前后时间，配置好config.txt文件后直接运行即可。

SM2_wtest.py是用于对比不同滑动窗口参数w下的优化(优化后时间/优化前时间)，配置好config.txt文件后直接运行即可。

config.txt是运行的配置文件，需要和configparser.py在同一个目录下，参数的顺序可以调整，但格式必须保持“参数名=数值”，且每个参数一行，椭圆曲线的点用空格分开xy坐标。其中w参数是滑动窗口的值；floor是SM2_wtest.py中滑动窗口参数w的下限，floor应该大于等于二，否则configparser会跳出错误；ceil是SM2_wtest.py中滑动窗口参数w的上限，ceil应该大于等于floor，否则configparser会跳出错误;N表示倍点运算的次数，N的值越大，运行时间越久，优化前后时间差也更明显。以下是默认参数，当config.txt中参数缺失的时候会使用默认参数
~~~ #默认测试数据
p=60275702009245096385686171515219896416297121499402250955537857683885541941187
a=54492052985589574080443685629857027481671841726313362585597978545915325572248
b=45183185393608134601425506985501881231876135519103376096391853873370470098074
G=29905514254078361236418469080477708234343499662916671209092838329800180225085 2940593737975541915790390447892157254280677083040126061230851964063234001314
pb=30466142855137288468788190552058120832437161821909553502398316083968243039754 53312363470992020232197984648603141288071418796825192480967103513769615518274
k=34550576952843389977837539438321907097625575044301827052096699664811526290255

# 测试参数
w=5
N=500

#w test范围，floor<=w<ceil,floor>1
floor=2
ceil=10
~~~

